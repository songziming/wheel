### 内核的代码组织结构

如何划分功能模块？
模块之间平级还是嵌套？
是否存在基础模块？

### 硬件抽象

目前 wheel 只支持 x86 一种硬件，但保留未来扩展的能力。

需要剥离硬件相关部分：
- 编译链接命令行参数（`option.mk`）、内核 section 布局（`layout.ld`）
- 代码中用到的配置、宏定义（`arch_settings.h`）
- 启动代码

### 如何单元测试

在 host 环境下运行内核代码的单元测试，难点包括：
- 部分内核模块需要专门的环境（中断、需要特定内存布局）
- 符号冲突，特别是 libc 相关函数

由单元测试文件主动引用被测文件，可以选择哪些代码需要测试。
尽量避免使用相同的符号名，给内核函数加上前缀或后缀 `k`。

### 运行时测试

除了单元测试，正常运行也可以加入一些检查逻辑，例如assert。
如果内核运行在调试模式下，遇到assert失败，就打印调试信息。


### 耦合关系

内核是紧密耦合的